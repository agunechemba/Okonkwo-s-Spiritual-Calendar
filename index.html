<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root { 
    --power-purple: #6a1b9a; 
    --text-gold: #ffd700; 
    --bg-dark: #121212; 
}

body { 
    font-family: 'Segoe UI', sans-serif; 
    background: var(--bg-dark); 
    color: white; 
    margin: 0;
    padding: 16px;
    overflow-x: hidden;
}

h1 {
    text-align:center; 
    color:var(--text-gold); 
    margin-bottom: 5px;
    font-size: clamp(20px, 5vw, 28px);
}

.subtitle {
    text-align:center; 
    color:#888; 
    font-size: 12px; 
    margin-bottom: 20px;
}

/* MOBILE SWIPE CONTAINER */
.calendar-wrapper { 
    display: flex; 
    flex-direction: row;
    gap: 16px; 
    padding: 10px 10px 20px;
    overflow-x: auto;

    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
}

/* Hide scrollbar (mobile clean look) */
.calendar-wrapper::-webkit-scrollbar {
    display: none;
}

/* MONTH CARD */
.month-container { 
    flex: 0 0 85vw; /* phone width card */
    max-width: 380px;

    background: #1e1e1e; 
    padding: 14px; 
    border-radius: 16px; 
    border: 1px solid #444; 
    box-sizing: border-box;

    transform: scale(1.02);
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);

    position: relative;
    scroll-snap-align: center;
}

/* GOLD ACTIVE BORDER */
.month-container::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 16px;
    border: 1px solid rgba(255,215,0,0.25);
    pointer-events: none;
}

/* OTHER MONTHS */
.month-container.secondary { 
    opacity: 0.55; 
    transform: scale(0.92);
    filter: grayscale(30%);
    box-shadow: none;
}

h3 { 
    color: var(--text-gold); 
    text-align: center; 
    margin-bottom: 12px; 
    font-size: 16px; 
    border-bottom: 1px solid #333; 
    padding-bottom: 8px; 
}

.grid { 
    display: grid; 
    grid-template-columns: repeat(7, 1fr); 
    gap: 4px; 
}

.day { 
    padding: 8px 2px; 
    border-radius: 6px; 
    background: #2a2a2a; 
    font-size: 11px; 
    text-align: center; 
    border: 1px solid transparent; 
}

.day-name { 
    font-size: 10px; 
    color: #ffd700; 
    padding-bottom: 6px; 
    font-weight: bold; 
}

.market-label { 
    display: block; 
    font-size: 8px; 
    font-weight: 800; 
    margin-top: 3px; 
    color: #888; 
}

/* POWER DAY */
.power-day { 
    background: var(--power-purple) !important; 
    border: 1px solid #9c27b0; 
    box-shadow: inset 0 0 8px rgba(0,0,0,0.5); 
    color: white; 
    font-weight: bold; 
}

.power-day .market-label { 
    color: #e1bee7; 
}

.today { 
    border: 2px solid var(--text-gold) !important; 
}

.legend { 
    text-align: center; 
    margin-top: 20px; 
    font-size: 13px; 
    color: #aaa; 
    background: #1e1e1e; 
    display: inline-block; 
    padding: 8px 16px; 
    border-radius: 20px; 
}

/* TABLET & UP */
@media (min-width: 768px) {
    .calendar-wrapper {
        justify-content: center;
    }

    .month-container {
        flex: 0 0 320px;
    }
}

</style>
</head>

<body>

<h1>Nkwo Calendar</h1>
<p class="subtitle"> For The Okonkwos </p>

<div class="calendar-wrapper" id="calendarWrapper"></div>

<div style="text-align:center;">
    <div class="legend">
        <span style="color:var(--power-purple)">●</span> Your Power Day (Nkwọ) | 
        <span style="color:var(--text-gold)">▢</span> Today's Date
    </div>
   <br><br>
   <a href="https://agunechemba.name.ng/Ancestral-Calendar/" target="_blank" style="text-decoration: none;">
    Find Other Marketdays
  </a>
</div>

<script>
// ===== LOGIC UNTOUCHED =====
const birthDate = new Date(1991, 6, 28);
const marketCycle = ["Eke", "Orie", "Afọ", "Nkwọ"];
const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
const today = new Date();

function getMarketDay(targetDate) {
    const timeDiff = targetDate.getTime() - birthDate.getTime();
    const diffDays = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
    let index = (3 + (diffDays % 4) + 4) % 4;
    return marketCycle[index];
}

function createMonth(dateOffset) {
    const targetMonthDate = new Date(today.getFullYear(), today.getMonth() + dateOffset, 1);
    const month = targetMonthDate.getMonth();
    const year = targetMonthDate.getFullYear();
    
    const container = document.createElement('div');
    container.className = `month-container ${dateOffset !== 0 ? 'secondary' : ''}`;
    
    const title = document.createElement('h3');
    title.innerText = targetMonthDate.toLocaleString('default', { month: 'long', year: 'numeric' });
    container.appendChild(title);

    const grid = document.createElement('div');
    grid.className = 'grid';

    dayNames.forEach(name => {
        const dName = document.createElement('div');
        dName.className = 'day-name';
        dName.innerText = name;
        grid.appendChild(dName);
    });

    const firstDayIdx = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    for (let i = 0; i < firstDayIdx; i++) grid.appendChild(document.createElement('div'));

    for (let d = 1; d <= daysInMonth; d++) {
        const current = new Date(year, month, d);
        const market = getMarketDay(current);
        
        const isToday = current.toDateString() === today.toDateString() ? 'today' : '';
        const isPowerDay = market === "Nkwọ" ? 'power-day' : '';
        
        const dayEl = document.createElement('div');
        dayEl.className = `day ${isToday} ${isPowerDay}`;
        dayEl.innerHTML = `${d}<span class="market-label">${market}</span>`;
        grid.appendChild(dayEl);
    }
    
    container.appendChild(grid);
    return container;
}

// ===== RENDER =====
const wrapper = document.getElementById('calendarWrapper');

const prevMonth = createMonth(-1);
const currentMonth = createMonth(0);
const nextMonth = createMonth(1);

wrapper.appendChild(prevMonth);
wrapper.appendChild(currentMonth);
wrapper.appendChild(nextMonth);

// ===== AUTO CENTER CURRENT MONTH =====
setTimeout(() => {
    currentMonth.scrollIntoView({
        behavior: "smooth",
        inline: "center",
        block: "nearest"
    });
}, 200);

</script>

</body>
</html>
